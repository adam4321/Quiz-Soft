{{!-- Settings view - using express handlebars --}}

<title>Quiz Soft | Job Postings</title>
<link type="text/css" rel="stylesheet" href="css/job-postings-page.css">

{{!-- Container for the dashboard --}}
<div id="top-row-container">
  
    {{#if this.postings}}

        {{!-- If the user has postings --}}
        <div id="dashboard-container" class="mdl-card mdl-shadow--2dp">

            <div class="mdl-card__title mdl-color-text--white dashboard-top-bar">
                <h2 class="mdl-card__title-text">Job Postings</h2>
            </div>

            <div class="mdl-card__supporting-text mdl-color-text--grey-600 posting-content">
                <div id="profile-div">
                    <img id="profile-image" src={{photo}}>
                    <p id="profile-email">{{email}}</p>
                </div>

                <div id="link-div">
                    <p id="link-txt">Create a Job</p>
                    <button id="link-btn" class="btn-style" onclick="navigateToBuilder();">Create</button>
                </div>

                <p id="row-msg"><i>Click a row to view the submissions</i></p>
        
                {{!-- Display No postings OR Table that displays the user's postings --}}
                <table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp" id="recordTable">
                    <thead>
                        <tr>
                            <th class="mdl-data-table__cell--non-numeric">Job Posting</th>
                            <th class="mdl-data-table__cell--non-numeric">Responses</th>
                            <th></th>
                        </tr>
                    </thead>

                    <tbody id="table-body">

                        {{#each postings}}
                            <tr id="row{{@index}}" onclick="folowLink(`{{_id}}`);">
                                    <td class="mdl-data-table__cell--non-numeric">
                                        <div class="posting-title">{{title}}</div>
                                    </td>

                                    <td>
                                        <div class="user-numbers">{{quizResponses.length}}</div>
                                    </td>

                                    <td class="btn-cell">
                                        <input 
                                            type="button" 
                                            value="Delete"
                                            class="btn-style" 
                                            onclick="deletePosting(`recordTable`, this, `{{_id}}`, event);"
                                        >
                                    </td>
                                </tr>
                        {{/each}}

                    </tbody>
                </table>

            </div>
        </div>

    {{else}}

        {{!-- No quizzes --}}
        <div id="dashboard-container" class="mdl-card mdl-shadow--2dp">

            <div class="mdl-card__title mdl-color-text--white dashboard-top-bar">
                <h2 class="mdl-card__title-text">Job Postings</h2>
            </div>

            <div class="mdl-card__supporting-text mdl-color-text--grey-600 no-posting-content">
                <div id="profile-div">
                    <img id="profile-image" src={{photo}}>
                    <p id="profile-email">{{email}}</p>
                </div>

                <div id="link-div">
                    <p id="link-txt">Create a Job</p>
                    <button id="link-btn" class="btn-style" onclick="navigateToBuilder();">Create</button>
                </div>

                <hr id="no-posting-break">
                <div id="no-posting-div">
                    <img id="question-logo" src="images/logo.png"/>
                    <p id="no-posting-txt">No Postings Yet</p>
                </div>

            </div>
        </div>
   
    {{/if}}

</div>

<script src="js/job-posting-client.js"></script>
